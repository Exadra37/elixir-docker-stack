#!/bin/bash

TAG=1.4
ENTRYPOINT=elixir

for argument in "${@}"
    do
        case "${argument}" in
            --tag | -t)
                TAG="${1}"
                shift 1
                ;;
            bash)
                ENTRYPOINT=bash
                shift 1
                ;;
            iex)
                ENTRYPOINT=iex
                shift 1
                ;;
            mix)
                ENTRYPOINT=mix
                shift 1
                ;;
    esac
done

sudo docker \
    run \
    --rm \
    -it \
    --volume "${PWD}":/home/elixir/workspace \
    exadra37/elixir:"${TAG}" \
    "${ENTRYPOINT}" "${@}"
